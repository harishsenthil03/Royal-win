<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Royal Win â€“ Final Auto Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  background:#020617;
  color:#fff;
  font-family:Arial;
  margin:0;
  padding:10px;
}
.container{
  max-width:480px;
  margin:auto;
}
h2{
  text-align:center;
  color:#38bdf8;
}
input,button{
  width:100%;
  padding:12px;
  margin-top:6px;
  border:none;
  border-radius:8px;
  font-size:16px;
}
.red{background:#dc2626;color:#fff}
.green{background:#16a34a;color:#fff}
.violet{background:#7c3aed;color:#fff}
.signal{
  margin-top:10px;
  padding:12px;
  text-align:center;
  border-radius:8px;
  font-size:20px;
}
.wait{background:#334155}
.buy-red{background:#dc2626}
.buy-green{background:#16a34a}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
  font-size:13px;
}
th,td{
  border:1px solid #334155;
  padding:5px;
  text-align:center;
}
.win{color:#22c55e}
.loss{color:#ef4444}
.skip{color:#facc15}
.stats{
  margin-top:8px;
  font-size:14px;
}
</style>
</head>

<body>
<div class="container">

<h2>ðŸŽ¯ Royal Win â€“ Final Tracker</h2>

<input id="serialInput" type="number" placeholder="Starting Serial Number">

<button class="red" onclick="addResult('RED')">RED</button>
<button class="green" onclick="addResult('GREEN')">GREEN</button>
<button class="violet" onclick="addResult('VIOLET')">VIOLET</button>

<div id="signalBox" class="signal wait">WAIT</div>

<div class="stats">
Accuracy: <b id="accuracy">0%</b><br>
Total Signals: <b id="totalSignals">0</b><br>
Wins: <b id="wins">0</b> | Losses: <b id="losses">0</b>
</div>

<table>
<thead>
<tr>
<th>Serial</th>
<th>Result</th>
<th>Status</th>
</tr>
</thead>
<tbody id="history"></tbody>
</table>

</div>

<script>
let serial = 0;
let historyData = [];

let lastSignal = null;
let totalSignals = 0;
let winSignals = 0;
let lossSignals = 0;

// ADD RESULT (ONE TAP)
function addResult(color){
  if(serial === 0){
    serial = parseInt(document.getElementById("serialInput").value);
    if(!serial){
      alert("Starting serial number enter pannunga");
      return;
    }
  }

  serial++;

  let status = "SKIP";

  // Evaluate previous signal
  if(lastSignal){
    if(color === "VIOLET"){
      status = "SKIP";
    }else if(color === lastSignal){
      status = "WIN";
      winSignals++;
    }else{
      status = "LOSS";
      lossSignals++;
    }
    totalSignals++;
    lastSignal = null;
  }

  historyData.push({
    serial: serial,
    result: color,
    status: status
  });

  generateSignal();
  updateTable();
  updateStats();
}

// SIGNAL GENERATION (SAFE LOGIC)
function generateSignal(){
  let box = document.getElementById("signalBox");

  let lastTwo = historyData
    .slice(-2)
    .map(x => x.result)
    .filter(c => c !== "VIOLET");

  if(lastTwo.length < 2 || lastTwo[0] !== lastTwo[1]){
    box.innerHTML = "WAIT";
    box.className = "signal wait";
    lastSignal = null;
    return;
  }

  lastSignal = lastTwo[0] === "RED" ? "GREEN" : "RED";
  box.innerHTML = "BUY " + lastSignal;
  box.className = "signal " + (lastSignal === "RED" ? "buy-red" : "buy-green");
}

// UPDATE TABLE
function updateTable(){
  let tbody = document.getElementById("history");
  tbody.innerHTML = "";

  for(let i = historyData.length - 1; i >= 0; i--){
    let r = historyData[i];
    tbody.innerHTML += `
      <tr>
        <td>${r.serial}</td>
        <td>${r.result}</td>
        <td class="${r.status.toLowerCase()}">${r.status}</td>
      </tr>
    `;
  }
}

// UPDATE STATS
function updateStats(){
  let accuracy = totalSignals === 0 ? 0 :
    Math.round((winSignals / totalSignals) * 100);

  document.getElementById("accuracy").innerText = accuracy + "%";
  document.getElementById("totalSignals").innerText = totalSignals;
  document.getElementById("wins").innerText = winSignals;
  document.getElementById("losses").innerText = lossSignals;
}
</script>

</body>
</html>